{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{RuO0:function(e,t,a){\"use strict\";a.r(t);var n=a(\"o0o1\"),r=a.n(n),c=a(\"HaE+\"),l=a(\"1OyB\"),s=a(\"vuIU\"),o=a(\"Ji7U\"),i=a(\"md7G\"),u=a(\"foSv\"),p=a(\"q1tI\"),d=a.n(p),b=a(\"pVnL\"),f=a.n(b),v=(a(\"Wt1U\"),a(\"3WF5\")),O=a.n(v),j=a(\"TSYQ\"),m=a.n(j),h=(a(\"17x9\"),a(\"ZeOK\")),g=a(\"ICNK\"),w=a(\"Y53p\"),y=a(\"H+2d\");function N(e){var t=e.children,a=e.className,n=m()(a),r=Object(g.a)(N,e),c=Object(w.a)(N,e);return d.a.createElement(c,f()({},r,{className:n}),t)}N.handledProps=[\"as\",\"children\",\"className\"],N.defaultProps={as:\"tbody\"},N.propTypes={};var R=N,A=a(\"MZgk\"),P=a(\"D1pA\");function x(e){var t=e.active,a=e.children,n=e.className,r=e.collapsing,c=e.content,l=e.disabled,s=e.error,o=e.icon,i=e.negative,u=e.positive,p=e.selectable,b=e.singleLine,v=e.textAlign,O=e.verticalAlign,j=e.warning,N=e.width,R=m()(Object(h.a)(t,\"active\"),Object(h.a)(r,\"collapsing\"),Object(h.a)(l,\"disabled\"),Object(h.a)(s,\"error\"),Object(h.a)(i,\"negative\"),Object(h.a)(u,\"positive\"),Object(h.a)(p,\"selectable\"),Object(h.a)(b,\"single line\"),Object(h.a)(j,\"warning\"),Object(h.d)(v),Object(h.f)(O),Object(h.g)(N,\"wide\"),n),A=Object(g.a)(x,e),C=Object(w.a)(x,e);return y.a.isNil(a)?d.a.createElement(C,f()({},A,{className:R}),P.a.create(o),c):d.a.createElement(C,f()({},A,{className:R}),a)}x.handledProps=[\"active\",\"as\",\"children\",\"className\",\"collapsing\",\"content\",\"disabled\",\"error\",\"icon\",\"negative\",\"positive\",\"selectable\",\"singleLine\",\"textAlign\",\"verticalAlign\",\"warning\",\"width\"],x.defaultProps={as:\"td\"},x.propTypes={},x.create=Object(A.e)(x,(function(e){return{content:e}}));var C=x;function E(e){var t=e.children,a=e.className,n=e.content,r=e.fullWidth,c=m()(Object(h.a)(r,\"full-width\"),a),l=Object(g.a)(E,e),s=Object(w.a)(E,e);return d.a.createElement(s,f()({},l,{className:c}),y.a.isNil(t)?n:t)}E.handledProps=[\"as\",\"children\",\"className\",\"content\",\"fullWidth\"],E.defaultProps={as:\"thead\"},E.propTypes={};var q=E;function k(e){var t=e.as,a=Object(g.a)(k,e);return d.a.createElement(q,f()({},a,{as:t}))}k.handledProps=[\"as\"],k.propTypes={},k.defaultProps={as:\"tfoot\"};var B=k;function _(e){var t=e.as,a=e.className,n=e.sorted,r=m()(Object(h.e)(n,\"sorted\"),a),c=Object(g.a)(_,e);return d.a.createElement(C,f()({},c,{as:t,className:r}))}_.handledProps=[\"as\",\"className\",\"sorted\"],_.propTypes={},_.defaultProps={as:\"th\"};var T=_;function z(e){var t=e.active,a=e.cellAs,n=e.cells,r=e.children,c=e.className,l=e.disabled,s=e.error,o=e.negative,i=e.positive,u=e.textAlign,p=e.verticalAlign,b=e.warning,v=m()(Object(h.a)(t,\"active\"),Object(h.a)(l,\"disabled\"),Object(h.a)(s,\"error\"),Object(h.a)(o,\"negative\"),Object(h.a)(i,\"positive\"),Object(h.a)(b,\"warning\"),Object(h.d)(u),Object(h.f)(p),c),j=Object(g.a)(z,e),N=Object(w.a)(z,e);return y.a.isNil(r)?d.a.createElement(N,f()({},j,{className:v}),O()(n,(function(e){return C.create(e,{defaultProps:{as:a}})}))):d.a.createElement(N,f()({},j,{className:v}),r)}z.handledProps=[\"active\",\"as\",\"cellAs\",\"cells\",\"children\",\"className\",\"disabled\",\"error\",\"negative\",\"positive\",\"textAlign\",\"verticalAlign\",\"warning\"],z.defaultProps={as:\"tr\",cellAs:\"td\"},z.propTypes={},z.create=Object(A.e)(z,(function(e){return{cells:e}}));var F=z;function L(e){var t=e.attached,a=e.basic,n=e.celled,r=e.children,c=e.className,l=e.collapsing,s=e.color,o=e.columns,i=e.compact,u=e.definition,p=e.fixed,b=e.footerRow,v=e.headerRow,j=e.headerRows,N=e.inverted,A=e.padded,P=e.renderBodyRow,x=e.selectable,C=e.singleLine,E=e.size,k=e.sortable,_=e.stackable,T=e.striped,z=e.structured,H=e.tableData,I=e.textAlign,D=e.unstackable,W=e.verticalAlign,Y=m()(\"ui\",s,E,Object(h.a)(n,\"celled\"),Object(h.a)(l,\"collapsing\"),Object(h.a)(u,\"definition\"),Object(h.a)(p,\"fixed\"),Object(h.a)(N,\"inverted\"),Object(h.a)(x,\"selectable\"),Object(h.a)(C,\"single line\"),Object(h.a)(k,\"sortable\"),Object(h.a)(_,\"stackable\"),Object(h.a)(T,\"striped\"),Object(h.a)(z,\"structured\"),Object(h.a)(D,\"unstackable\"),Object(h.b)(t,\"attached\"),Object(h.b)(a,\"basic\"),Object(h.b)(i,\"compact\"),Object(h.b)(A,\"padded\"),Object(h.d)(I),Object(h.f)(W),Object(h.g)(o,\"column\"),\"table\",c),J=Object(g.a)(L,e),M=Object(w.a)(L,e);if(!y.a.isNil(r))return d.a.createElement(M,f()({},J,{className:Y}),r);var Q={defaultProps:{cellAs:\"th\"}},U=(v||j)&&d.a.createElement(q,null,F.create(v,Q),O()(j,(function(e){return F.create(e,Q)})));return d.a.createElement(M,f()({},J,{className:Y}),U,d.a.createElement(R,null,P&&O()(H,(function(e,t){return F.create(P(e,t))}))),b&&d.a.createElement(B,null,F.create(b)))}L.handledProps=[\"as\",\"attached\",\"basic\",\"celled\",\"children\",\"className\",\"collapsing\",\"color\",\"columns\",\"compact\",\"definition\",\"fixed\",\"footerRow\",\"headerRow\",\"headerRows\",\"inverted\",\"padded\",\"renderBodyRow\",\"selectable\",\"singleLine\",\"size\",\"sortable\",\"stackable\",\"striped\",\"structured\",\"tableData\",\"textAlign\",\"unstackable\",\"verticalAlign\"],L.defaultProps={as:\"table\"},L.propTypes={},L.Body=R,L.Cell=C,L.Footer=B,L.Header=q,L.HeaderCell=T,L.Row=F;var H=L,I=a(\"QetY\"),D=a(\"YFqc\"),W=a.n(D),Y=a(\"5Yp1\"),J=a(\"VC3L\"),M=a(\"JX7q\"),Q=a(\"rePB\"),U=a(\"oZBQ\"),X=d.a.createElement;function Z(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var K=function(e){Object(o.a)(a,e);var t=Z(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s)),Object(Q.a)(Object(M.a)(e),\"onApprove\",Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(J.a)(e.props.address),t.next=3,U.a.eth.getAccounts();case 3:return n=t.sent,t.next=6,a.methods.approveRequest(e.props.id).send({from:n[0]});case 6:case\"end\":return t.stop()}}),t)})))),Object(Q.a)(Object(M.a)(e),\"onFinalize\",Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(J.a)(e.props.address),t.next=3,U.a.eth.getAccounts();case 3:return n=t.sent,t.next=6,a.methods.finalizeRequest(e.props.id).send({from:n[0]});case 6:case\"end\":return t.stop()}}),t)})))),e}return Object(s.a)(a,[{key:\"render\",value:function(){var e=H.Row,t=H.Cell,a=this.props,n=a.id,r=a.request,c=a.approversCount,l=r.approvalCount>c/2;return X(e,{disabled:r.complete,positive:l&&!r.complete},X(t,null,n),X(t,null,r.description),X(t,null,U.a.utils.fromWei(r.value,\"ether\")),X(t,null,r.recipient),X(t,null,r.approvalCount,\"/\",c),X(t,null,r.complete?null:X(I.a,{color:\"green\",basic:!0,onClick:this.onApprove},\"Approve\")),X(t,null,r.complete?null:X(I.a,{color:\"teal\",basic:!0,onClick:this.onFinalize},\"Finalize\")))}}]),a}(p.Component),S=d.a.createElement;function V(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var G=function(e){Object(o.a)(a,e);var t=V(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:\"renderRows\",value:function(){var e=this;return this.props.requests.map((function(t,a){return S(K,{key:a,id:a,request:t,address:e.props.address,approversCount:e.props.approversCount})}))}},{key:\"render\",value:function(){var e=H.Header,t=H.Row,a=H.HeaderCell,n=H.Body;return S(Y.a,null,S(\"h3\",null,\"Requests\"),S(W.a,{href:\"/campaigns/[campaign]/requests/new\",as:\"/campaigns/\".concat(this.props.address,\"/requests/new\")},S(\"a\",null,S(I.a,{primary:!0,floated:\"right\",style:{marginBottom:10}},\"Add Request\"))),S(H,null,S(e,null,S(t,null,S(a,null,\"ID\"),S(a,null,\"Description\"),S(a,null,\"Amount\"),S(a,null,\"Recipient\"),S(a,null,\"Approval Count\"),S(a,null,\"Approve\"),S(a,null,\"Finalize\"))),S(n,null,this.renderRows())),S(\"div\",null,\"Found \",this.props.requestCount,\" requests.\"))}}],[{key:\"getInitialProps\",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,l,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.campaign,n=Object(J.a)(a),e.next=4,n.methods.getRequestsCount().call();case 4:return c=e.sent,e.next=7,n.methods.approversCount().call();case 7:return l=e.sent,e.next=10,Promise.all(Array(parseInt(c)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return s=e.sent,e.abrupt(\"return\",{address:a,requests:s,requestCount:c,approversCount:l});case 12:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(p.Component);t.default=G},oLzM:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/campaigns/[campaign]/requests\",function(){return a(\"RuO0\")}])}},[[\"oLzM\",0,2,4,1,3,5]]]);","extractedComments":[]}