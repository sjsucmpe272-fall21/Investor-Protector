{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport { Button, Table } from \"semantic-ui-react\";\nimport Link from \"next/link\";\nimport Layout from \"../../../../components/Layout\";\nimport Campaign from \"../../../../ethereum/campaign\";\nimport RequestRow from \"../../../../components/RequestRow\";\n\nclass RequestIndex extends Component {\n  static async getInitialProps(context) {\n    const {\n      campaign\n    } = context.query;\n    const campaignContract = Campaign(campaign);\n    const requestCount = await campaignContract.methods.getRequestsCount().call();\n    const approversCount = await campaignContract.methods.approversCount().call();\n    const requests = await _Promise.all(Array(_parseInt(requestCount)).fill().map((element, index) => {\n      return campaignContract.methods.requests(index).call();\n    }));\n    return {\n      address: campaign,\n      requests,\n      requestCount,\n      approversCount\n    };\n  }\n\n  renderRows() {\n    return this.props.requests.map((request, index) => {\n      return __jsx(RequestRow, {\n        key: index,\n        id: index,\n        request: request,\n        address: this.props.address,\n        approversCount: this.props.approversCount\n      });\n    });\n  }\n\n  render() {\n    const {\n      Header,\n      Row,\n      HeaderCell,\n      Body\n    } = Table;\n    return __jsx(Layout, null, __jsx(\"h3\", null, \"Requests\"), __jsx(Link, {\n      href: \"/campaigns/[campaign]/requests/new\",\n      as: `/campaigns/${this.props.address}/requests/new`\n    }, __jsx(\"a\", null, __jsx(Button, {\n      primary: true,\n      floated: \"right\",\n      style: {\n        marginBottom: 10\n      }\n    }, \"Add Request\"))), __jsx(Table, null, __jsx(Header, null, __jsx(Row, null, __jsx(HeaderCell, null, \"ID\"), __jsx(HeaderCell, null, \"Description\"), __jsx(HeaderCell, null, \"Amount\"), __jsx(HeaderCell, null, \"Recipient\"), __jsx(HeaderCell, null, \"Approval Count\"), __jsx(HeaderCell, null, \"Approve\"), __jsx(HeaderCell, null, \"Finalize\"))), __jsx(Body, null, this.renderRows())), __jsx(\"div\", null, \"Found \", this.props.requestCount, \" requests.\"));\n  }\n\n}\n\nexport default RequestIndex;","map":null,"metadata":{},"sourceType":"module"}